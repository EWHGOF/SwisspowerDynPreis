# Swisspower Dynamischer Strompreis API

Home-Assistant-Integration zum periodischen Abruf der dynamischen Tarife für das Abrufen von Dynamischen Strompreisen welche den Swisspower Standard folgen.
Energieversorger welche diesen Standard einhalten:



Wichtig: das ist meine Erste Integration ich bitte um unterstützung.


## Installation (HACS)

1. HACS öffnen → **Integrationen** → **⋮** → **Benutzerdefinierte Repositories**.
2. Repository-URL hinzufügen und als **Integration** markieren.
3. **Swisspower DynPreis** installieren.
4. Home Assistant neu starten.

## Konfiguration

Nach der Installation kann die Integration über **Einstellungen → Geräte & Dienste** hinzugefügt werden.
Ein Wizard führt durch die Konfiguration:

- **Messpunktnummer** (Metering Code) und **Authentifizierungstoken** für den produktiven API-Zugriff oder
- **Tarifname** (z. B. D1) ohne Token. 

Zusätzlich können die gewünschten Tariftypen ausgewählt werden (electricity, grid, dso, integrated, feed_in).

Electricity = Der Preis für die Energie
Grid = Netznutzung
Integrated = die Summe von allen Bestandteilen. Inklusive abgaben.
Feed_in = ist der Preis für die Rückvergütung von erzeugter energie.

## Sensoren

Für jeden ausgewählten Tariftyp werden zusätzliche Sensoren erstellt:

- **Current price** (CHF/kWh): aktueller Arbeitspreis, inklusive der kompletten Tarif-Slots im Attribut `prices`.
- **Next change** (Timestamp): Zeitpunkt, wann der aktuelle Preis endet.
- **Average price today** (CHF/kWh): Durchschnittspreis heute (inkl. min/max/average Statistik).
- **Average price tomorrow** (CHF/kWh): Durchschnittspreis morgen (inkl. Statistik).
- **Lowest 2h/4h window today/tomorrow** (CHF/kWh): günstigste 2h/4h-Window.
- **Highest 2h/4h window today/tomorrow** (CHF/kWh): teuerste 2h/4h-Window.
- **Cheapest 10/25/50% hours today** (Binary): Ein, wenn die aktuelle Stunde zu den günstigsten 10/25/50% gehört.
- **Most expensive 10/25% hours today** (Binary): Ein, wenn die aktuelle Stunde zu den teuersten 10/25% gehört.
- **In cheapest/most expensive 2h/4h window today** (Binary): Ein, wenn die aktuelle Stunde im günstigsten/teuersten Window liegt.

## Optionen

In den Optionen kann die tägliche Abrufzeit (lokale Zeit) definiert werden. Zu diesem Zeitpunkt wird die API einmal pro Tag abgefragt.

## Weiterführende Links 

Die API-Dokumentation findet sich unter:
https://esit.code-fabrik.ch/doc_scalar

Für Tests (z. B. bei von Codex generiertem Code) kann folgende Basis-URL verwendet werden:
https://esit-test.code-fabrik.ch/api/v1

übersicht EVU mit Dynamischen Tarifen:
https://smartgridready.ch/loesungen/dynamischetarife

Weiterführende Intressante Website:
https://dynamische-stromtarife.ch/

